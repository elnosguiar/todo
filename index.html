<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ”¥ Ultimate ì—…ë¬´ ëŒ€ì‹œë³´ë“œ</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
/* ---------------------- ê¸°ë³¸ ìŠ¤íƒ€ì¼ ---------------------- */
body {margin:0;padding:0;font-family:'Noto Sans KR',sans-serif;background:#1b1b2f;color:#e0e0ff;}
.container {max-width:1000px;margin:20px auto;padding:20px;background:#2b2b44;border-radius:15px;box-shadow:0 0 25px #4fa3ff50;}
h2{text-align:center;margin-bottom:25px;font-weight:700;}
section{margin-bottom:30px;padding:15px;background:#1f1f3a;border-radius:12px;}
input, textarea, select, button{padding:8px;margin:5px 0;border-radius:5px;border:none;outline:none;font-size:1rem;}
input, textarea, select{width:100%;}
button{cursor:pointer;background:#4fa3ff;color:#000;font-weight:bold;transition:.3s;}
button:hover{background:#6dc2ff;}
ul{list-style:none;padding:0;}
li{background:#333366;margin:5px 0;padding:8px;border-radius:5px;display:flex;justify-content:space-between;align-items:center;}
li.done{text-decoration:line-through;color:#aaa;}
.flex{display:flex;gap:5px;align-items:center;}
.flex button{flex:0;}
#timer{font-size:2rem;text-align:center;margin-top:10px;}
.result-box{background:#333366;padding:10px;border-radius:5px;margin-top:10px;word-break:break-word;}
canvas{background:#1c1c2c;border-radius:10px;padding:10px;}
.priority-high{color:#ff6b6b;font-weight:700;}
.priority-medium{color:#ffcc66;font-weight:600;}
.priority-low{color:#66ccff;font-weight:500;}
.tag {margin-left:10px;font-size:0.85rem;padding:2px 6px;border-radius:4px;background:#444466;color:#fff;}
</style>
</head>
<body>
<div class="container">

<h2>ğŸ”¥ Ultimate ì—…ë¬´ ëŒ€ì‹œë³´ë“œ</h2>

<!-- 1ï¸âƒ£ To-Do ë¦¬ìŠ¤íŠ¸ -->
<section>
<h3>ğŸ“Œ To-Do ë¦¬ìŠ¤íŠ¸</h3>
<input id="taskInput" placeholder="í•  ì¼ì„ ì…ë ¥í•˜ì„¸ìš”">
<select id="taskPriority">
  <option value="high">ë†’ìŒ ğŸ”¥</option>
  <option value="medium">ì¤‘ê°„ âš¡</option>
  <option value="low">ë‚®ìŒ â„ï¸</option>
</select>
<input id="taskTag" placeholder="íƒœê·¸ (ì„ íƒ)">
<button onclick="addTask()">ì¶”ê°€</button>
<ul id="taskList"></ul>
</section>

<!-- 2ï¸âƒ£ Pomodoro íƒ€ì´ë¨¸ -->
<section>
<h3>â± Pomodoro íƒ€ì´ë¨¸</h3>
<div id="timer">25:00</div>
<div class="flex">
<button onclick="startTimer()">ì‹œì‘</button>
<button onclick="pauseTimer()">ì¼ì‹œì •ì§€</button>
<button onclick="resetTimer()">ì´ˆê¸°í™”</button>
<select id="pomodoroSelect">
  <option value="25">25ë¶„</option>
  <option value="50">50ë¶„</option>
</select>
</div>
</section>

<!-- 3ï¸âƒ£ ë©”ëª¨ -->
<section>
<h3>ğŸ“ ë©”ëª¨</h3>
<textarea id="memoArea" rows="5" placeholder="íƒœê·¸ë¥¼ #íƒœê·¸ í˜•íƒœë¡œ ë¶™ì—¬ ì €ì¥ ê°€ëŠ¥í•©ë‹ˆë‹¤"></textarea>
<button onclick="saveMemo()">ì €ì¥</button>
</section>

<!-- 4ï¸âƒ£ ê°„ë‹¨ ê³„ì‚°ê¸° -->
<section>
<h3>ğŸ§® ê³„ì‚°ê¸° + ë‹¨ìœ„ ë³€í™˜</h3>
<input id="calcInput" placeholder="ìˆ˜ì‹ ì…ë ¥ (ì˜ˆ: 12*3+5)">
<button onclick="calculate()">ê³„ì‚°</button>
<div class="result-box" id="calcResult"></div>
</section>

<!-- 5ï¸âƒ£ í†µê³„ & ì°¨íŠ¸ -->
<section>
<h3>ğŸ“Š ì—…ë¬´ í†µê³„</h3>
<canvas id="todoChart" height="150"></canvas>
<canvas id="pomodoroChart" height="150" style="margin-top:20px;"></canvas>
<canvas id="tagChart" height="150" style="margin-top:20px;"></canvas>
</section>

</div>

<script>
// -------------------- To-Do --------------------
const taskList=document.getElementById('taskList');
const taskInput=document.getElementById('taskInput');
const taskPriority=document.getElementById('taskPriority');
const taskTag=document.getElementById('taskTag');

function saveTasks(){
  const tasks=[...taskList.children].map(li=>{
    return {text:li.dataset.text, done:li.classList.contains('done'), priority:li.dataset.priority, tag:li.dataset.tag};
  });
  localStorage.setItem('tasks', JSON.stringify(tasks));
  updateTodoChart(); updateTagChart();
}

function loadTasks(){
  const data=JSON.parse(localStorage.getItem('tasks')||'[]');
  data.forEach(item=>createTask(item.text,item.priority,item.tag,item.done));
}

function createTask(text,priority='medium',tag='',done=false){
  const li=document.createElement('li');
  li.dataset.text=text; li.dataset.priority=priority; li.dataset.tag=tag;
  li.textContent=text;
  if(priority==='high') li.classList.add('priority-high');
  else if(priority==='medium') li.classList.add('priority-medium');
  else li.classList.add('priority-low');
  if(tag) { const t=document.createElement('span'); t.textContent=tag; t.classList.add('tag'); li.appendChild(t);}
  if(done) li.classList.add('done');
  li.onclick=()=>{li.classList.toggle('done'); saveTasks();}
  const del=document.createElement('button'); del.textContent='âŒ'; del.onclick=e=>{e.stopPropagation(); li.remove(); saveTasks();}
  li.appendChild(del);
  taskList.appendChild(li);
}

function addTask(){
  const val=taskInput.value.trim();
  const tagVal=taskTag.value.trim();
  const priorityVal=taskPriority.value;
  if(val){createTask(val,priorityVal,tagVal); taskInput.value=''; taskTag.value=''; saveTasks();}
}

loadTasks();

// -------------------- Pomodoro --------------------
let pomodoroTime=25*60;
let timerId=null;
let totalFocusTime = JSON.parse(localStorage.getItem('focusTime')||'{}');

function updateTimer(){
  const m=Math.floor(pomodoroTime/60);
  const s=pomodoroTime%60;
  document.getElementById('timer').textContent=`${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
  if(pomodoroTime>0){ pomodoroTime--; 
    const today=new Date().toISOString().split('T')[0];
    totalFocusTime[today]=(totalFocusTime[today]||0)+1; 
    localStorage.setItem('focusTime',JSON.stringify(totalFocusTime));
    updatePomodoroChart();
  }
  else {clearInterval(timerId); alert("â° ì‹œê°„ ì¢…ë£Œ!");}
}

function startTimer(){ if(!timerId) timerId=setInterval(updateTimer,1000);}
function pauseTimer(){ clearInterval(timerId); timerId=null;}
function resetTimer(){ clearInterval(timerId); timerId=null; pomodoroTime=parseInt(document.getElementById('pomodoroSelect').value)*60; updateTimer();}
updateTimer();

// -------------------- ë©”ëª¨ --------------------
const memoArea=document.getElementById('memoArea');
function saveMemo(){ localStorage.setItem('memo', memoArea.value); alert("ğŸ’¾ ë©”ëª¨ ì €ì¥ ì™„ë£Œ");}
memoArea.value=localStorage.getItem('memo')||'';

// -------------------- ê³„ì‚°ê¸° --------------------
function calculate(){
  const expr=document.getElementById('calcInput').value;
  try{ const result=eval(expr); document.getElementById('calcResult').textContent=`ê²°ê³¼: ${result}`;}
  catch(e){document.getElementById('calcResult').textContent='âŒ ì˜ëª»ëœ ìˆ˜ì‹';}
}

// -------------------- Charts --------------------
const todoCtx=document.getElementById('todoChart').getContext('2d');
const pomodoroCtx=document.getElementById('pomodoroChart').getContext('2d');
const tagCtx=document.getElementById('tagChart').getContext('2d');

let todoChart=new Chart(todoCtx,{type:'doughnut',data:{labels:['ì™„ë£Œ','ë¯¸ì™„ë£Œ'],datasets:[{data:[0,0],backgroundColor:['#4fa3ff','#6666aa']}]},options:{plugins:{legend:{position:'bottom'}}}});
let pomodoroChart=new Chart(pomodoroCtx,{type:'bar',data:{labels:[],datasets:[{label:'ì´ ì§‘ì¤‘ ì‹œê°„(ë¶„)',data:[],backgroundColor:'#4fa3ff'}]},options:{plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}}});
let tagChart=new Chart(tagCtx,{type:'bar',data:{labels:[],datasets:[{label:'íƒœê·¸ë³„ í• ì¼ ìˆ˜',data:[],backgroundColor:'#ffcc66'}]},options:{plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}}});

function updateTodoChart(){
  const tasks=[...taskList.children];
  const doneCount=tasks.filter(t=>t.classList.contains('done')).length;
  const undoneCount=tasks.length-doneCount;
  todoChart.data.datasets[0].data=[doneCount,undoneCount];
  todoChart.update();
}

function updatePomodoroChart(){
  const labels=Object.keys(totalFocusTime).sort();
  const data=labels.map(d=>Math.floor(totalFocusTime[d]/60));
  pomodoroChart.data.labels=labels; pomodoroChart.data.datasets[0].data=data; pomodoroChart.update();
}

function updateTagChart(){
  const tasks=[...taskList.children];
  const tagMap={};
  tasks.forEach(t=>{const tag=t.dataset.tag; if(tag){tagMap[tag]=(tagMap[tag]||0)+1;}});
  tagChart.data.labels=Object.keys(tagMap);
  tagChart.data.datasets[0].data=Object.values(tagMap);
  tagChart.update();
}

updateTodoChart(); updatePomodoroChart(); updateTagChart();
</script>
</body>
</html>
